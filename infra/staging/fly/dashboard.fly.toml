# fly.toml app configuration file for PayHole dashboard staging

app = "payhole-dashboard-staging"
primary_region = "iad"

[build]
  image = "ghcr.io/your-org/payhole/dashboard:latest"

[env]
  PORT = "3000"
  NODE_ENV = "production"
  PAYMENTS_API_BASE_URL = "http://payhole-payments-staging.internal:4000"
  NEXT_PUBLIC_PROXY_HTTP_URL = "https://proxy.payhole-staging.internal"
  NEXT_PUBLIC_PROXY_DNS_ADDR = "proxy.payhole-staging.internal:5353"
  NEXT_PUBLIC_PROXY_HEALTH_URL = "https://proxy.payhole-staging.internal/health"
  ADMIN_JWT_SECRET = "set-in-fly-secrets"
  ANALYTICS_API_BASE_URL = ""

[http_service]
  internal_port = 3000
  force_https = true
  auto_stop_machines = true
  auto_start_machines = true
  min_machines_running = 1

